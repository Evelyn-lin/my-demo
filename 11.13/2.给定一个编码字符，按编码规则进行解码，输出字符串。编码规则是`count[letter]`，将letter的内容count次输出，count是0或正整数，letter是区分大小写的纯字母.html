<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        //给定一个编码字符，按编码规则进行解码，输出字符串。编码规则是`count[letter]`，将letter的内容count次输出，count是0或正整数，letter是区分大小写的纯字母
        function decodeString(str) {
            //若不存在，则返回当前字符串
            if (str.indexOf('[') === -1) {
                return str;
            }
            //正则表示 整数[字符串] 并提取出所有匹配字符串
            let list = str.match(/(\d+)(\[([a-z]|[A-Z])\])/g)
            list.map((el) => {
                //el为所有匹配字符串
                let start = el.indexOf('[');
                let end = el.indexOf(']');
                let num = el.substring(0,start);//次数substring(开始索引，结束索引) 不包括结束索引
                let char = el.substring(start+1,end);//字符
                let charStr = num>1?char.repeat(Number(num)):char;//Number()先将num转换为数字型
                str = str.replace(el,charStr);//替换原字符串的匹配内容成新字符串
            })
            return decodeString(str); //再次重新解读新字符串
        }
        console.log('9[a]7[b]');
        
    </script>
</body>

</html>